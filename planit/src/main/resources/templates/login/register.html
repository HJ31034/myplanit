<!doctype html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="main/layout/basic">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.88.1">
    <title>Checkout example · Bootstrap v5.1</title>
 	<th:block layout:fragment="css">
    <link rel="canonical" href="https://getbootstrap.com/docs/5.1/examples/checkout/">
	
	<link href="assets/dist/bootstrap.min.css" rel="stylesheet">
     
         
    <style>
    .id_ok{color:green; display: none;}
	.id_already{color:#6A82FB; display: none;}
	/*.bg-light{position:center; background-color:black;}*/
	
	
    </style>
    </th:block>
    
        <script src="https://code.jquery.com/jquery-latest.min.js"></script>          
<script th:inline="javascript" >



function checkId(){
    var userId = $('#userId').val();
$.ajax({
    url:'/idCheck',
    type:'post',
    data:{userId:userId},
    dataType:'json',
    success:
    	function(cnt){ //컨트롤러에서 넘어온 cnt값을 받는다 
    	
        if(cnt != 1){ //cnt가 1이 아니면(=0일 경우) -> 사용 가능한 아이디 
            
        	$('.id_ok').css("display","inline-block"); 
            $('.id_already').css("display", "none");
        } else if (cnt ==1){ // cnt가 1일 경우 -> 이미 존재하는 아이디
            $('.id_already').css("display","inline-block");
            $('.id_ok').css("display", "none");
        } 
   
    	
    
    },
    error:function(){
        alert("에러입니다");
    }
});
};



//비밀번호 확인 스크릡트 
$(function(){
$("#alert-success").hide();
$("#alert-danger").hide();
$("input").keyup(function(){
    var pwd1 = $("#pwd1").val();
    var pwd2 = $("#pwd2").val();
    
    if(pwd1 != ""){
        if(pwd1 == pwd2 && pwd2 !=""){
            $("#alert-success").show();
            $("#alert-danger").hide();
            $("#alert-info").hide();
            $("#submit").removeAttr("disabled");
        }else if(pwd1 != pwd2 && pwd2!="" ) {
            $("#alert-success").hide();
            $("#alert-danger").show();
            $("#alert-info").hide();
            $("#submit").attr("disabled", "disabled");
            
        } 
    }
});
});

$(function(){

	$("input").keyup(function(){
	    var phone = $("#phone").val();
	    var patternPhone= new RegExp("01[016789]-[^0][0-9]{2,4}-[0-9]{3,4}");
	    
	    if(phone != ""){
	        if(phone.length >= 3){
	            $("#phone").val(phone.replace(/[^0-9]/g, '')
	          		  .replace(/^(\d{0,3})(\d{0,4})(\d{0,4})$/g, "$1-$2-$3").replace(/(\-{1,2})$/g, ""));
	           
	           
	            $("#submit").removeAttr("disabled");
	        }else if(phonePattern.test(phone) ) {
	            
	           
	            $("#submit").attr("disabled", "disabled");

	        } 
	    }
	});
	}); 

</script>

  </head>
  
  
  
  
  <th:block layout:fragment="content">
   
  
  
  
  <div class="bg-light">
    
    
<div class="container">
  <main class="centering2">
  <div class="py-5 text-center">
      <img class="d-block mx-auto mb-4" src="" alt="" width="72" height="57">
      <h2>Register form</h2>
      <p class="lead"> Plsease fill up the spaces below</p>
    </div>
      
      <div class="col-md-7 col-lg-8">
        <h4 class="mb-3">회원가입</h4>
        
        <div class="centering">
        <form class="needs-validation" action="" id="regForm" name="regForm"
         method="post" modelAttribute="user" onsubmit="return validation();">
          
          
          
          <div class="row g-3">
            
	            
            
            
            <div class="col-12">
              <label for="username" class="form-label">이름 <span class="text-muted"></span></label>
              <input type="text" class="form-control" name="userName" id="username"
              th:value="${user?.userName}" placeholder="이름" required="required">
              
            </div>
            <div class="col-12">
              <label for="username" class="form-label">아이디</label>
              <div class="input-group has-validation">
                <span class="input-group-text">@</span>
                
                <input type="text" class="form-control" name="userId" id="userId" 
                th:value="${user?.userId}"
                placeholder="USERID" autocomplete="username" required onchange="checkId()"/>
                <span th:text="${valid_userId}"></span>
                
              <!--   <span>
                <button type="button" onclick="fn_idChk();" value="N" id="idChk"
                class="w-100 btn btn-lg btn-primary">중복체크</button>
                </span>
               -->
              </div>
              <br>
                <div>
                <p class="id_ok">사용 가능한 아이디입니다.</p>
				<p class="id_already">누군가 이 아이디를 사용하고 있어요.</p>
                </div>
            </div>



            <div class="col-12">
              <label for="password" class="form-label">비밀번호 </label>
              <input type="password" class="form-control" name="password" id="pwd1" 
              th:value="${user?.password}"
              autocomplete="new-password" placeholder="PASSWORD" required/>
              <span th:text="${valid_password}"></span>
            </div>
            
            <div class="col-12">
              <label for="password" class="form-label">비밀번호 확인</label>
              <input type="password" class="form-control" name="password2" id="pwd2"
              autocomplete="new-password"  placeholder="RE-PASSWORD" required/>
             <div class="alert alert-success" id="alert-success">비밀번호가 일치합니다.</div>
			<div class="alert alert-danger" id="alert-danger">비밀번호가 일치하지 않습니다. 다시한번 확인하여 주세요.</div>
          	<div class="alert alert-info" id="alert-info"> 비밀번호 영문 대소문자 특수문자 최소 1개 포함 8-20자리 조합으로 만드시오</div>
            </div>
           
            
    
            
	            <div class="col-12">
              <label for="email" class="form-label">이메일 <span class="text-muted"></span></label>
              <input type="email" class="form-control" name="email" id="email" 
              th:value="${user?.email}" placeholder="you@example.com">
  			<span th:text="${valid_email}"></span>
            </div>
            
            <div class="col-12">
              <label for="address2" class="form-label">휴대폰 <span class="text-muted"></span></label>
              <input type="tel" class="form-control" name="phone" id="phone"  maxlength="13"
              th:value="${user?.phone}" placeholder="010-1234-5678(-없이)">
              <span th:text="${valid_phone}"></span>
            </div>

          

           

          
          </div>

          <hr class="my-4">

          <div class="form-check">
            <input type="checkbox" class="form-check-input" id="same-address">
            <label class="form-check-label" for="same-address">약관동의</label>
          </div>



                <hr class="my-4">

         
          <button class="w-100 btn btn-lg btn-primary" type="submit"
				id="submit" style="background-color: #9FCF62; border-color: #9FCF62;">회원가입</button>
        </form>
        </div>
        
     </div>
    
 
  </main>

          </div>

     </div>
</th:block>


	


  
 
</html>