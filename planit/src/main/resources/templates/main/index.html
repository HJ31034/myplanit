<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="main/layout/basic">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>Callback function - fullPage.js</title>
	<meta name="author" content="Alvaro Trigo Lopez" />
	<meta name="description" content="fullPage callback function." />
	<meta name="keywords"  content="fullpage,jquery,demo,callback,function,event" />
	<meta name="Resource-type" content="Document" />


	<link rel="stylesheet" type="text/css" href="../../assets/css/jquery.fullPage.css" />


<th:block layout:fragment="css">
	<link href="../../assets/css/main.css" rel="stylesheet">
</th:block>
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script type="text/javascript" src="assets/js/jquery.fullPage.js"></script>
	<script type="text/javascript">
		$(document).ready(function() {
			$('#fullpage').fullpage({
				sectionsColor: ['#fff', '#fff', '#fff', '#fff', '#fff'],
				anchors: ['section1', 'section2', 'section3', 'section4', 'section5'],
				menu: '#menu',
				navigation:true,
				navigationPosition: 'right',
			});
			
			// í˜ì´ì§€ê°€ ë¡œë“œë˜ë©´ ê²€ìƒ‰ì°½ì˜ ì»¤ì„œê°€ ê¹œë¹¡ì´ê²Œ í•¨.
			$('.search').focus();

			// í‚¤ì›Œë“œ ê²€ìƒ‰ ë¶€ë¶„ì—ì„œ ì´ì „ì— ì„ íƒí–ˆë˜ í‚¤ì›Œë“œë¡œ ëŒì•„ê°€ê²Œ í•  ìˆ˜ ìˆë„ë¡ í•¨.
			var oldKwd = [];
			oldKwd.push(0);
			var index = 0;
			$(document).on("click", ".kwd", function(){
				var kwd = $(this).val();
				var tagId = $(this).attr('id');
				$.ajax({
					type : 'POST',
					url : '/kwd',
					data : {
						keyId : kwd
					},
					dataType : 'json',
					success : function(data) {
						// í•´ë‹¹ í‚¤ì›Œë“œì˜ keyIdë¥¼ ì»¨íŠ¸ë¡¤ëŸ¬ì— ì „ë‹¬í•˜ê¸° ìœ„í•´ ì‚¬ìš©
						if(kwd <= 4)
							str2 = "<input type='hidden' name='fk' value='" + kwd + "' />";
						else
							str2 = "<input type='hidden' name='sk' value='" + kwd + "' />";
						$('.kwd-form').append(str2);
						
						if(data.length == 0){
							$('.kwd-form').submit();
						}
						
						if(tagId != null){
							oldKwd.pop();
							index--;
							console.log('pre');
						}
						else {
							oldKwd.push(kwd);
							index++;
							console.log('next');
						}
						
						str = "";
						
						if(kwd != 0){
						str = "<button class='kwd' id='pre' value='"
						str += oldKwd[index - 1];
						str += "'><</button>";
						}
						for (var i = 0; i < data.length; i++) {
							str += "<button class='kwd' value='";
							str += data[i].keyId;
							str += "'>";
							str += data[i].keyName;
							str += "</button>";
						}

						$('.kwd-box').html(str);
						
						console.log(str);
					},
					error : function() {
						alert("ì—ëŸ¬ ë°œìƒ");
					}
				});
			});

			$('.profile_box').click(
					function() {
						var userId = $(this).children('.profile_name').text();
						location.href = '/planiter/' + userId;
					});

			$('.member').click(function() {
				location.href = '#';
			});


		});
	</script>

</head>
<body>

<th:block layout:fragment="content">

<div id="fullpage">

	<section class="section" style="position: relative; ">
	
		<div class="search-box">
			<span>
				<form action="/planit/search" method="get">
					<input name="term" id="search" class="search" >
					
					<span style="font: inherit; font-size: 100%;">ë¥¼</span>
				</form>
			</span>
			<p style="margin-top: 30px;">ì˜í‚¤ìš°ëŠ” ë°©ë²•ì´</p>
			<p>ê¶ê¸ˆí•˜ë‹¤.</p>
		</div>
	
	</section>
	
	<section class="section">
	<div class="footer-newsletter">
			<div class="container">
				<h4>í‚¤ì›Œë“œë¡œ ê´€ì‹¬ìˆëŠ” ì‹ë¬¼ì„ ì°¾ì•„ë³´ì„¸ìš”!</h4>
				<div class="kwd-box">
					<th:block th:each="plantKwd : ${plantKwdList}">
						<button class="kwd" th:value="${plantKwd.keyId}">[[${plantKwd.keyName}]]</button>
					</th:block>
				</div>
				<form action="/planit/search" method="get" class="kwd-form">
				</form>
			</div>
			<!-- end container -->
		</div>
	</section>
	<section class="section">
	<div class="container">

			<div class="section-title">
				<!-- <h2>Contact</h2> -->
				<h3>
					<span>ì¶”ì²œ ì‹ë¬¼ ë¦¬ìŠ¤íŠ¸</span>
				</h3>
				<p>ë‹¹ì‹ ì˜ ì‹ë¬¼ì„ ì°¾ì•„ë³´ì„¸ìš”ğŸŒ±</p>
			</div>

			<div class="box">
				<div 
					th:each="plant : ${recommendList}" class="plant_box" th:onclick="location.href='/planit/plantsDetail?plantsId=[[${plant.plantsId}]]&&plantsName=[[${plant.plantsName}]]'">
					<div class="plant_img_box">
						<img th:src="${plant.fileName}" class="plant_img" alt="">
					</div>
					<h3 class="plant_name">[[${plant.plantsName}]]</h3>
				</div>
			</div>
		</div>
		<!-- end container -->
	</section>
	<section class="section">
	<div class="container">

			<div class="section-title">
				<!-- <h2>Contact</h2> -->
				<h3>
					<span>ì¶”ì²œ ê³„ì •</span>
				</h3>
				<p>ë‹¤ë¥¸ ì‚¬ìš©ìë“¤ê³¼ ì†Œí†µí•´ë³´ì„¸ìš”ğŸŒ³</p>
			</div>

			<div class="box">
				<div
					th:each="user : ${users}" class="profile_box">
					<div class="profile_img_box">
						<img th:src="@{imgs/img_section/} + ${user.profileImg}" class="profile_img" alt="">
						<!-- <img th:src="@{imgs/img_section/ë°•ì¥ë€.jpg}" class="profile_img"
							alt=""> -->
					</div>
					<h3 class="profile_name">[[${user.userId}]]</h3>
				</div>
			</div>
		</div>
		<!-- end container -->
	</section>
	<section class="team section-bg section">
	<div class="container">

			<div class="section-title">
				<!-- <h2>Contact</h2> -->
				<h3>
					<span>ìµœì‹  í¬ìŠ¤íŠ¸</span>
				</h3>
				<p>ë‹¤ë¥¸ ì‚¬ìš©ìë“¤ì˜ ì‹ë¬¼ ì„±ì¥ ê³¼ì •ì„ êµ¬ê²½í•´ë³´ì„¸ìš”ğŸŒ¼</p>
			</div>

			<div class="row">
				<div class="col-lg-3 col-md-6 d-flex align-items-stretch"
					
					th:each="post : ${postList}">
					<div class="member">
						<a th:href="@{/planiter/post/read(postno=${post.postNo})}">
							<div class="member-img">
								<img th:if="${not #strings.isEmpty(post.realFileName)}"
									th:src="@{/planiter/post/image/} + ${post.realFileName}"
									class="img-fluid"> 
								<img th:unless="${not #strings.isEmpty(post.realFileName)}"
									th:src="@{/imgs/img_section/ë§ˆë€íƒ€.jpg}" class="img-fluid">
									<!-- /*<img th:unless="${ #strings.isEmpty(post.orgFileName)}"
									th:src="@{/imgs/img_section/ë§ˆë€íƒ€.jpg}" class="img-fluid">*/ -->
							</div>
							<div class="member-info">
								<!-- <h4>Walter White</h4> -->
								<span>#[[${post.plantsName}]]</span> <span>#[[${post.createDt.split(" ")[0]}]]</span>
							</div>
						</a>
					</div>
				</div>
			</div>	
			<!-- end row -->
		</div>
		<!-- end container -->
	</section>
</div>

</th:block>
</body>
</html>
