<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="sns/layout/basic">
<th:block layout:fragment="title">
	<title>write post page</title>
</th:block>

<th:block layout:fragment="write-post">
	<div class="post_inner">

		<div class="post_box_left">
			<div class="photo_box_insert">
				<a href="#"><img src="/imgs/img_section/add.png"></a> 
			</div>
		</div>

		<div class="post_box_right">
			<div class="write_box">
				<p>글쓰기</p>
			</div>
			<div class="select_box">
				<div class="category">
				<select name="plant">
					<option value="">내 식물 선택</option>
					<option value="">산세베리아</option>
					<option value="">스투키</option>
					<option value="">몬테리아</option>
				</select>
				</div>
				
				<div class="weather">
					<article>
						<img id="map_popup" src="/imgs/img_section/location.png">
						<span id="addr"></span>
						<span id="weather"></span>
					</article>
				</div>
			</div>
			<div class="commit_box">
				<div class="commit">
					<button>등록</button>
				</div>
			</div>
		</div>
	</div>
</th:block>

<th:block layout:fragment="script">
	<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=f7a0f64aeb06c20320c2ed2716218074&libraries=services"></script>
	<script src="/js/location.js" defer></script>

	<script th:inline="javascript">
		let openWin;

		$(function() {
			getLatAndLong();
		});

		//kakaoMap click event 추가
		let mapPopup = document.getElementById('map_popup');
		mapPopup.addEventListener('click',function(){
			openKakaoMapPopup();
		});

		function openKakaoMapPopup(){
			let width = 900;
			let height = 650;
			let popupX = (window.screen.width / 2) - (width / 2);
			let popupY= (window.screen.height / 2) - (height / 2);

			window.name = 'parentForm';
			openWin = window.open(`/planiter/post/popup/map?latitude=${latitude}&longitude=${longitude}`,'childForm',`width=${width},height=${height},top=${popupY}, left=${popupX},resizable=no,scrollbars=no,toolbar=no,location=no, directories=no`);
		}



	</script>

</th:block>

</html>